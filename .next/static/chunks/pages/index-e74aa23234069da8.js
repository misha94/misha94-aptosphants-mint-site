(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(2900)}])},2900:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return K}});var d,e=c(7568),f=c(1799),g=c(9396),h=c(4051),i=c.n(h),j=c(5893),k=c(9008),l=c.n(k),m=c(7294),n=c(214),o=c.n(n),p=c(4284),q=c(3032),r=c(9669),s=c.n(r),t="0x5e756f07a9ee6755d5fdd9992d46cdb1ef653d50ac1ea44dcd0af448e925bdfc",u="AptosPhants",v="mainnet",w="0x481efbf0c3cbec627b5f5674287d4ae6ee770da5949dcfe698a8520108236a33";function x(){return(x=(0,e.Z)(i().mark(function a(){var b,c,e,f,g,h,j,k;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s().get("".concat(d,"/accounts/").concat(t,"/resources"));case 2:c=(b=a.sent).data,e=!0,f=!1,g=void 0,a.prev=5,h=c[Symbol.iterator]();case 7:if(e=(j=h.next()).done){a.next=14;break}if((k=j.value).type!=="".concat(w,"::candy_machine_v2::ResourceData")){a.next=11;break}return a.abrupt("return",k.data.resource_account.account);case 11:e=!0,a.next=7;break;case 14:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(5),f=!0,g=a.t0;case 20:a.prev=20,a.prev=21,e||null==h.return||h.return();case 23:if(a.prev=23,!f){a.next=26;break}throw g;case 26:return a.finish(23);case 27:return a.finish(20);case 28:return console.error("Candy machine not initialized on given address for chain ".concat(v)),a.abrupt("return",null);case 30:case"end":return a.stop()}},a,null,[[5,16,20,28],[21,,23,27]])}))).apply(this,arguments)}function y(){return(y=(0,e.Z)(i().mark(function a(b){var c,e,f,g,h,j,k,l,m;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s().get("".concat(d,"/accounts/").concat(b,"/resources"));case 2:e=(c=a.sent).data,f={},g=!0,h=!1,j=void 0,a.prev=6,k=e[Symbol.iterator]();case 8:if(g=(l=k.next()).done){a.next=19;break}if("0x3::token::Collections"!==(m=l.value).type){a.next=15;break}return f.numUploadedTokens=m.data.create_token_data_events.counter,f.numMintedTokens=m.data.mint_token_events.counter,f.tokenDataHandle=m.data.token_data.handle,a.abrupt("continue",16);case 15:m.type==="".concat(w,"::candy_machine_v2::CollectionConfigs")&&(f.candyMachineConfigHandle=m.data.collection_configs.handle);case 16:g=!0,a.next=8;break;case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(6),h=!0,j=a.t0;case 25:a.prev=25,a.prev=26,g||null==k.return||k.return();case 28:if(a.prev=28,!h){a.next=31;break}throw j;case 31:return a.finish(28);case 32:return a.finish(25);case 33:return a.abrupt("return",f);case 34:case"end":return a.stop()}},a,null,[[6,21,25,33],[26,,28,32]])}))).apply(this,arguments)}function z(){return(z=(0,e.Z)(i().mark(function a(b){var c,e,f,g,h,j,k,l,m;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=JSON.stringify({key_type:"vector<u8>",value_type:"".concat(w,"::candy_machine_v2::CollectionConfig"),key:B(u)}),e={headers:{"Content-Type":"application/json"}},a.next=4,s().post("".concat(d,"/tables/").concat(b,"/item"),c,e);case 4:return h=(g=(f=a.sent).data).is_public,j=g.max_supply_per_user,k=g.mint_fee_per_mille/1e8,l=g.presale_mint_time,m=g.public_mint_time,a.abrupt("return",{isPublic:h,maxMintsPerWallet:j,mintFee:k,presaleMintTime:l,publicMintTime:m});case 12:case"end":return a.stop()}},a)}))).apply(this,arguments)}function A(){return(A=(0,e.Z)(i().mark(function a(b,c,d,e,f){var g,h,j,k,l,m,n,o;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:g=[],h=!0,j=!1,k=void 0,a.prev=2,l=f.events[Symbol.iterator]();case 4:if(h=(m=l.next()).done){a.next=22;break}if(!("0x3::token::MintTokenEvent"!==(n=m.value).type)){a.next=8;break}return a.abrupt("continue",19);case 8:return o={name:n.data.id.name,imageUri:null},a.prev=9,a.next=12,b.getTableItem(c,{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:d,collection:e,name:o.name}});case 12:o.imageUri=a.sent.uri,a.next=18;break;case 15:a.prev=15,a.t0=a.catch(9),console.error(a.t0);case 18:g.push(o);case 19:h=!0,a.next=4;break;case 22:a.next=28;break;case 24:a.prev=24,a.t1=a.catch(2),j=!0,k=a.t1;case 28:a.prev=28,a.prev=29,h||null==l.return||l.return();case 31:if(a.prev=31,!j){a.next=34;break}throw k;case 34:return a.finish(31);case 35:return a.finish(28);case 36:return console.log("Minted NFTs"),console.log(g),a.abrupt("return",g);case 39:case"end":return a.stop()}},a,null,[[2,24,28,36],[9,15],[29,,31,35]])}))).apply(this,arguments)}function B(a){for(var b="",c=0;c<a.length;c++)b+=a.charCodeAt(c).toString(16);return b}d="dev"==v?"https://fullnode.devnet.aptoslabs.com/v1":"test"===v?"https://fullnode.testnet.aptoslabs.com/v1":"https://fullnode.mainnet.aptoslabs.com/v1";var C={getCandyMachineResourceAccount:function(){return x.apply(this,arguments)},getCandyMachineCollectionInfo:function(a){return y.apply(this,arguments)},getCandyMachineConfigData:function(a){return z.apply(this,arguments)},getTimeDifference:function(a,b){if(b<a)return"LIVE";var c=Math.abs(b-a),d=Math.floor(c/86400),e=Math.floor((c-=86400*d)/3600)%24,f=Math.floor((c-=3600*e)/60)%60,g=Math.floor((c-=60*f)%60);return{days:d,hours:e,minutes:f,seconds:g}},getMintedNfts:function(a,b,c,d,e){return A.apply(this,arguments)}},D={src:"/_next/static/media/aptosLogo.ece54af8.png",height:535,width:535,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAhElEQVR42hWNLwvCUAAHf19n2/ezWBVFi0WYaB0YLboiCHvOIIKWsaSgea7q/r3zycFx7YTwMTQO40pSEJcpB5t2C6JSgXZmxbKac2q335D4qGudkXO26y4n49ZoWI8JrWknTB2DRkXyZP+52Bf36sE7kbxNEdFnxIxeKU8Ij+S/dfbRD+nXYVN5Na+BAAAAAElFTkSuQmCC"},E=c(4966),F=function(a){var b=a.show,c=a.onConnect,d=(0,q.useWallet)();return(0,j.jsx)(E.Z,{id:o().connectWalletModal,show:b,onHide:c,centered:!0,children:(0,j.jsx)(E.Z.Body,{className:"d-flex flex-column",children:d.wallets.map(function(a){var b=a.adapter;return(0,j.jsxs)("button",{className:o().walletAdapterOption,onClick:(0,e.Z)(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.select(b.name);case 2:c();case 3:case"end":return a.stop()}},a)})),children:[(0,j.jsx)("img",{src:b.icon}),(0,j.jsx)("h6",{className:"mb-0",children:b.name})]},b.name)})})})},G=function(a){var b,c,d=function(){if(e){n(!0);return}i.disconnect()},e=a.connectButton,f=a.className,g=a.style,h=a.disabled,i=(0,q.useWallet)(),k=(0,m.useState)(!1),l=k[0],n=k[1],p=(0,j.jsxs)("button",{disabled:h,className:"".concat(o().connectWalletBtn," ").concat(f," ").concat(h?"disabled":""),onClick:d,style:g,children:[(0,j.jsx)("img",{src:D.src}),(0,j.jsx)("h4",{className:"mb-0",children:e?"Connect":"Disconnect"})]});return(0,j.jsxs)(j.Fragment,{children:[e?p:(null===(b=i.account)|| void 0===b?void 0:null===(c=b.address)|| void 0===c?void 0:c.toString())!==void 0?(0,j.jsx)("span",{className:"mx-auto w-100",children:p}):null,(0,j.jsx)(F,{show:l,onConnect:function(){return n(!1)}})]})},H=c(6968),I=c(2920),J=new p.gK(d);function K(){var a,b=(0,q.useWallet)(),c=(0,m.useState)(!1),d=c[0],h=c[1],k=(0,m.useState)({data:{},fetch:M}),n=k[0],p=k[1],r=(0,m.useState)({presale:"",public:"",timeout:null}),s=r[0],v=r[1],x=(0,m.useState)({numToMint:1,minting:!1,success:!1,mintedNfts:[]}),y=x[0],z=x[1],A=(0,m.useState)(!1),B=A[0],D=A[1];(0,m.useEffect)(function(){var a;!b.autoConnect&&(null===(a=b.wallet)|| void 0===a?void 0:a.adapter)&&b.connect()},[b.autoConnect,b.wallet,b.connect]);var F=(a=(0,e.Z)(i().mark(function a(){var c,d,e,h,j,k,l;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!((null===(c=b.account)|| void 0===c?void 0:null===(d=c.address)|| void 0===d?void 0:d.toString())===void 0||y.minting)){a.next=3;break}return a.abrupt("return");case 3:return console.log(null===(e=b.account)|| void 0===e?void 0:null===(h=e.address)|| void 0===h?void 0:h.toString()),z((0,g.Z)((0,f.Z)({},y),{minting:!0})),j={type:"entry_function_payload",function:"".concat(w,"::candy_machine_v2::mint_tokens"),type_arguments:[],arguments:[t,u,y.numToMint,]},a.prev=7,a.next=10,b.signAndSubmitTransaction(j);case 10:return l=a.sent,console.log(l),a.next=14,J.waitForTransactionWithResult(l.hash);case 14:k=a.sent,a.next=20;break;case 17:a.prev=17,a.t0=a.catch(7),k={success:!1,vm_status:a.t0.message};case 20:K(k),k.success&&p((0,g.Z)((0,f.Z)({},n),{data:(0,g.Z)((0,f.Z)({},n.data),{numMintedTokens:(parseInt(n.data.numMintedTokens)+parseInt(y.numToMint)).toString()})}));case 22:case"end":return a.stop()}},a,null,[[7,17]])})),function(){return a.apply(this,arguments)});function K(a){return L.apply(this,arguments)}function L(){return(L=(0,e.Z)(i().mark(function a(b){var c,d,e,h,j;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log(b),c=b.success,console.log(c?"Mint success!":"Mint failure, an error occured."),d=[],c){a.next=8;break}e=new Map([["Failed to sign transaction","An error occured while signing."],["Move abort in 0x1::coin: EINSUFFICIENT_BALANCE(0x10006): Not enough coins to complete transaction","Insufficient funds to mint."],]),h=b.vm_status,console.error("Mint not successful: ".concat(h)),j=void 0===(j=e.get(h))?"Unkown error occured. Try again.":j,I.Am.error(j),a.next=12;break;case 8:return a.next=10,C.getMintedNfts(J,n.data.tokenDataHandle,n.data.cmResourceAccount,u,b);case 10:d=a.sent,I.Am.success("Minting success!");case 12:z((0,g.Z)((0,f.Z)({},y),{minting:!1,success:c,mintedNfts:d}));case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}function M(){return N.apply(this,arguments)}function N(){return(N=(0,e.Z)(i().mark(function a(){var b,c,d,e,j=arguments;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=j.length>0&& void 0!==j[0]&&j[0],console.log("Fetching candy machine data..."),b&&h(!0),a.next=5,C.getCandyMachineResourceAccount();case 5:if(null!==(c=a.sent)){a.next=10;break}return p((0,g.Z)((0,f.Z)({},n),{data:{}})),h(!1),a.abrupt("return");case 10:return a.next=12,C.getCandyMachineCollectionInfo(c);case 12:return d=a.sent,a.next=15,C.getCandyMachineConfigData(d.candyMachineConfigHandle);case 15:e=a.sent,p((0,g.Z)((0,f.Z)({},n),{data:(0,f.Z)({cmResourceAccount:c},d,e)})),h(!1);case 18:case"end":return a.stop()}},a)}))).apply(this,arguments)}function O(){var a=setTimeout(O,1e3);if(void 0!==n.data.presaleMintTime&& void 0!==n.data.publicMintTime){var b=Math.round(new Date().getTime()/1e3);v({timeout:a,presale:C.getTimeDifference(b,n.data.presaleMintTime),public:C.getTimeDifference(b,n.data.publicMintTime)})}}return(0,m.useEffect)(function(){M(!0),setInterval(M,1e4)},[]),(0,m.useEffect)(function(){clearTimeout(s.timeout),O(),console.log(n.data)},[n]),(0,m.useEffect)(function(){D(!0)},[b,n,s]),(0,j.jsx)("div",{className:"bg-gray-500",children:(0,j.jsxs)("div",{className:o().container,children:[(0,j.jsxs)(l(),{children:[(0,j.jsx)("title",{children:"Aptos NFT Mint"}),(0,j.jsx)("meta",{name:"description",content:"Aptos NFT Mint"}),(0,j.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,j.jsxs)("main",{className:o().main,children:[(0,j.jsxs)("h1",{className:o().title,children:[u," Mint"]}),(0,j.jsx)("div",{className:o().topcorner,children:(0,j.jsx)(G,{connectButton:!b.connected,className:"d-flex"})}),(0,j.jsx)("img",{src:"https://cloudflare-ipfs.com/ipfs/QmWrT3NLKJJAhw18ER4ssHsCFn2hKQPascViR8pJZtjpeT",style:{width:"480px",height:"480px"}}),(0,j.jsx)("div",{id:"collection-info",className:"d-flex flex-column align-items-center text-white",style:{width:"80%"},children:d?(0,j.jsx)(H.Z,{animation:"border",role:"status",className:"mt-5",children:(0,j.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"d-flex align-items-center my-3",children:[(0,j.jsx)("input",{className:"".concat(o().defaultInput," me-3"),type:"number",min:"1",max:void 0===n.data.maxMintsPerWallet?10:Math.min(n.data.maxMintsPerWallet,n.data.numUploadedTokens-n.data.numMintedTokens),value:y.numToMint,onChange:function(a){return z((0,g.Z)((0,f.Z)({},y),{numToMint:a.target.value}))}}),(0,j.jsx)("button",{className:o().button,onClick:F,disabled:!B,children:y.minting?(0,j.jsx)(H.Z,{animation:"border",role:"status",children:(0,j.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):"Mint"}),(0,j.jsxs)("h4",{className:"mx-3 mb-0",children:[n.data.mintFee*y.numToMint," $APT"]}),(0,j.jsx)("span",{style:{width:"15px",height:"15px",borderRadius:"50%",background:n.data.isPublic?"green":"red"}})]}),(0,j.jsxs)("h5",{children:[n.data.numMintedTokens,"/ ",2501," minted"]}),(0,j.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",children:[(0,j.jsx)("h3",{style:{textDecoration:"underline"},children:"Presale In:"}),(0,j.jsx)("h6",{children:"LIVE"===s.presale?"LIVE":s.presale.days+" days : "+s.presale.hours+" hours : "+s.presale.minutes+" minutes : "+s.presale.seconds+" seconds"})]}),(0,j.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",children:[(0,j.jsx)("h3",{style:{textDecoration:"underline"},children:"Public In:"}),(0,j.jsx)("h6",{children:"LIVE"===s.public?"LIVE":s.public.days+" days : "+s.public.hours+" hours : "+s.public.minutes+" minutes : "+s.public.seconds+" seconds"})]})]})}),(0,j.jsx)(E.Z,{id:"mint-results-modal",show:y.success,onHide:function(){return z((0,g.Z)((0,f.Z)({},y),{success:!1,mintedNfts:[]}))},centered:!0,size:"lg",children:(0,j.jsx)(E.Z.Body,{className:"d-flex flex-column align-items-center pt-5 pb-3",children:(0,j.jsx)("div",{className:"d-flex justify-content-center w-100 my-5",style:{flexWrap:"wrap"},children:y.mintedNfts.map(function(a){return(0,j.jsxs)("div",{className:"".concat(o().mintedNftCard," d-flex flex-column mx-3"),children:[(0,j.jsx)("img",{src:null===a.imageUri?"":a.imageUri}),(0,j.jsx)("h5",{className:"text-white text-center mt-2",children:a.name})]},a.name)})})})})]})]})})}},214:function(a){a.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",title:"Home_title__T09hD",topcorner:"Home_topcorner__TjzLq",button:"Home_button__Zs7A2",description:"Home_description__41Owk",code:"Home_code__suPER",logo:"Home_logo__27_tb",grid:"Home_grid__GxQ85",defaultInput:"Home_defaultInput__xlsGa",connectWalletBtn:"Home_connectWalletBtn__9GRoE",disabled:"Home_disabled__jP87C","modal-content":"Home_modal-content__H9WYP",walletAdapterOption:"Home_walletAdapterOption__DYxiE",mintedNftCard:"Home_mintedNftCard__c3J8H"}}},function(a){a.O(0,[644,14,774,888,179],function(){var b;return a(a.s=5557)}),_N_E=a.O()}])